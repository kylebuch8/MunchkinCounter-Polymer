<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-animated-pages/core-animated-pages.html">
<link rel="import" href="../../bower_components/font-roboto/roboto.html">
<link rel="import" href="../mc-home/mc-home.html">
<link rel="import" href="../mc-setup/mc-setup.html">
<link rel="import" href="../mc-game/mc-game.html">
<link rel="import" href="../mc-player/mc-player.html">

<polymer-element name="mc-app">
    <template>
        <style>

            core-animated-pages,
            section,
            section > * {
                height: 100%;
            }

        </style>

        <!-- <core-animated-pages id="pages" transitions="hero-transition cross-fade cross-fade-delayed" selected="{{selected}}"> -->
        <core-animated-pages id="pages" selected="{{selected}}">
            <mc-home name="home" gameId="{{gameId}}"></mc-home>
            <mc-setup name="setup" gameId="{{gameId}}"></mc-setup>
            <mc-game name="game" players={{players}} player="{{player}}" playerId="{{playerId}}" gameId="{{gameId}}" on-core-activate="{{playerChanged}}"></mc-game>
            <mc-player name="player" player="{{player}}" playerId="{{playerId}}" gameId="{{gameId}}"></mc-player>
        </core-animated-pages>
    </template>

    <script>
        Polymer({
            selected: 'home',

            eventDelegates: {
                'main': function () {
                    this.$.pages.selected = 'game';
                },

                'setup': function () {
                    this.$.pages.selected = 'setup';
                }
            },

            playerChanged: function () {
                if (this.player) {
                    this.$.pages.selected = 'player';
                } else {
                    this.$.pages.selected = 'game';
                }
            }
        });
    </script>
</polymer-element>
